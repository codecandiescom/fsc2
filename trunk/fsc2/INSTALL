A) Requirements
===============

The following tools and libraries are needed to compile, install and run fsc2:

 1) gmake (i.e. the GNU version of 'make')
 2) gcc
 3) flex
 4) bison
 5) install
 6) sed
 7) XFORMS library (version 0.89 or higher)
 8) GPIB library (will also compile and run without, see below)

Optionally, you should have

 9) mail
10) addr2line

but if it is missing the basic functionality is still there.

To create the complete documentation you also need

11) makeinfo
12) install-info (GNU texinfo version)
13) tex (if missing no Postscript and PDF documentation is created)
14) convert and identify from the ImageMagick package (or no PostScript
	and PDF documentation will be created)
15) dvips (if missing no Postscript documentation is created)
16) perl (version 5.0 or higher)
17) pdftex (if missing no PDF documentation will be created)
18) gzip


The XFORMS library is available from e.g. (some links may be outdated)

  ftp.cs.ruu.nl/pub/XFORMS
  einstein.phys.uwm.edu/pub/xforms
  ftp.fu-berlin.de/unix/X11/gui/xforms
  ftp.st.ryukoku.ac.jp/pub/X11/xforms
  ftp.via.ecp.fr/pub2/xforms
  ftp.unipi.it/pub/mirror/xforms
  ftp.uni-trier.de/pub/unix/X11/xforms


The GPIB library consists of a library and a module to interface GPIB cards.
You can either use the one I've written (works, as ar as I know, for fsc2
with 2.2 and 2.4 kernels and should also work with 2.0 kernels but I really
didn't test it), the older LLP (Linux Lab Project) library to be found at

  http://www.llp.fu-berlin.de

(which, at least the last time I checked, didn't work with 2.2. and 2.4
kernels) or the one from National Instruments, to be downloaded from

  http://www.natinst.com

(which is supposed to work with 2.2 kernels, but I couldn't get it to
function reliable). Unfortunately, only the LLP library supports cards
from other companies than National Instruments. You may also compile
fsc2 without having a GPIB library, but then devices controlled via the
GPIB bus can't be used.


B) Preparing for Installation
=============================

After installing the required tools and libraries and extracting the
archive go into the newly created directory fsc2. Edit the Makefile in
this directory.

Normally, fsc2 and all auxiliary files needed will be installed below
/usr/local (i.e. in /usr/local/bin, /usr/local/lib/fsc2, /usr/local/info
and /usr/local/share/doc). To change these locations edit the first lines
of the Makefile.

The next two variables OWNER and GROUP must be set to the owner of all the
files that will be installed as well as its group. I would strongly recommend
to create a special account and a special group for fsc2. fsc2 needs to be
installed setuid'ed, so for security reasons this special user should have as
low privileges as possible and should not be able to log into the system
(e.g. by setting its shell in /etc/passwd to /bin/false). Most of the time
fsc2 runs with the real users ID and group but at a few places (e.g. when
writing to log files, creating lock files or accessing shared memory) it
switches back to the EUID and EGID of fsc2.

The next lines are for setting the GPIB library that you are going to use.
You may set the first variable, GPIB_LIBRARY either to LLP for the old
(Linux Lab Project) library, to NI when using the National Instruments
library or to JTT if you're using the library I wrote. If you don't want
GPIB support you also may set this variable to NONE. In this case fsc2
won't be able to run experiments which need devices that are connected
via the GPIB bus (but you still can test such EDL programs). Use this
option only if you either want to built a test version or if all your
devices are controlled via the serial ports.

If you use the National Instruments GPIB driver you can set the location
where fsc2 will expect the GPIB configuration file, gpib.conf. But usually
there is no reason to change the default value.

While running fsc2 may write out information about the activity on the
GPIB bus into a log file. You can change the default log file /tmp/gpib.log
to something appropriate for your setup (or even to /dev/null). You can also
set the verbosity of the logs by changing the variable GPIB_LOG_LEVEL to
either HIGH, MEDIUM, LOW or OFF.

The final variable to be set is the email address of the person that will
receive bug reports and notifications if fsc2 should crash. Usually, you
should not change this variable except when you apply changes to the program.
In this case sending these kind of mails to me obviously doesn't make too
much sense...


C) Compiling and Installing
===========================

Go into the main directory of the package and type 'make'. This may take
some time to finish. Usually no warnings should show up during the
compilation (at least on systems with a newer libc and if my GPIB library
is used), but warnings may occur when the documentation is created and some
of the required tools are not available. It may even happen that make stops
with an error message during this stage (i.e. while making the documentation).
This does *not* mean that the program didn't compile succesfully!

Please don't start 'make' from one of the subdirectories, this is bound to
fail in most cases.

If you get more than a few warnings during the compilation stage of the
program or the make process fails completely please send me an email with
the output of make. You can save to output of make to a file, e.g.
fsc2_make.log, by running make with the command line

    make > fsc2_make.log 2>&1

if you're using the Bourne or Korn shell (sh or ksh) or bash. Use

    make >& fsc2_make.log

if you use the C shell (csh) or tcsh.

When the compilation of the program succeds (even though making the
documentation failed at some stage), you can now install the program by
typing 'make install'. Normally, you will need root privileges to do this.
If making the documentation failed with an error also the installon may
fail while installing the documentation, but this is not something to
worry about...

Please note: If you installed the program and then decide that you don't
like it and want to get rid of it, you can always de-install it by running

   make deinstall

as long as you haven't changed the makefiles in between.


D) Setting Device File Permissions
==================================

All users doing experiments with fsc2 need read and write access to the
device files associated with the devices to be used. These are the serial
ports (i.e. /dev/ttyS*) and the GPIB controller card. To be able to access
the device files either read and write permissions must be set to 'other'
for the device files or read and write permissions must be set for 'group'
and all fsc2 users must be members of the groups that own the device files.


E) Simple Tests
===============

The subdirectory 'edl' contains several several EDL programs that you can
use to test fsc2 and get acquainted with the syntax. Unfortunately, some
of the files will not work - I didn't had time to systematically weed out
the ones that are outdated. There are a few programs that will even work
without any devices, these are

  a.edl
  gr.edl
  stoch.edl
  qq.edl
  z.edl
  zz.edl
  2d_endor_test.edl
  2_td.edl

Just start by typing 'fsc2 a.edl' or 'fsc2 z.edl' and click onto the "Start"
button to get an idea about how fsc2 displays 1-dimensional and 2-dimensional
data sets.

                                            Have fun, Jens

                               email: Jens.Toerring@physik.fu-berlin.de
